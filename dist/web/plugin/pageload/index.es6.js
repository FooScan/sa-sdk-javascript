function wrapPluginInitFn(e,t,n){var o=e.init;return t&&(e.name=t),e.init=function(t,r){if(t.readyState&&t.readyState.state>=3||!t.on)return a();function a(){o.call(e,t,r)}t.on(n,a)},e}var PageLoad={init:function(e){function t(){var n=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance,o=0,r={$url:e._.getURL(),$title:document.title,$url_path:e._.getURLPath(),$referrer:e._.getReferrer(null,!0)};if(n&&n.timing){var a=n.timing;0===a.fetchStart||0===a.domContentLoadedEventEnd?e.log("performance \u6570\u636e\u83b7\u53d6\u5f02\u5e38"):o=a.domContentLoadedEventEnd-a.fetchStart,function(t,n){if(t.getEntries&&"function"==typeof t.getEntries){for(var o=t.getEntries(),r=null,a=0;a<o.length;a++)"transferSize"in o[a]&&(r+=o[a].transferSize);e._.isNumber(r)&&r>=0&&r<10737418240&&(n.$page_resource_size=Number((r/1024).toFixed(3)))}}(n,r)}else e.log("\u6d4f\u89c8\u5668\u672a\u652f\u6301 performance API.");o>0&&(r.event_duration=Number((o/1e3).toFixed(3))),e.track("$WebPageLoad",r),window.removeEventListener?window.removeEventListener("load",t):window.detachEvent&&window.detachEvent("onload",t)}"complete"==document.readyState?t():window.addEventListener?window.addEventListener("load",t):window.attachEvent&&window.attachEvent("onload",t)}};wrapPluginInitFn(PageLoad,"PageLoad","sdkReady");export default PageLoad;