!function(){"use strict";function e(e,t,n){var r=e.init;return t&&(e.name=t),e.init=function(t,o){function i(){r.call(e,t,o)}return t.readyState&&t.readyState.state>=3||!t.on?i():void t.on(n,i)},e}var t={init:function(e){function t(t,n){if(t.getEntries&&"function"==typeof t.getEntries){for(var r=t.getEntries(),o=null,i=0;i<r.length;i++)"transferSize"in r[i]&&(o+=r[i].transferSize);e._.isNumber(o)&&o>=0&&o<10737418240&&(n.$page_resource_size=Number((o/1024).toFixed(3)))}}function n(){var r=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance,o=0,i={$url:e._.getURL(),$title:document.title,$url_path:e._.getURLPath(),$referrer:e._.getReferrer(null,!0)};if(r&&r.timing){var a=r.timing;0===a.fetchStart||0===a.domContentLoadedEventEnd?e.log("performance \u6570\u636e\u83b7\u53d6\u5f02\u5e38"):o=a.domContentLoadedEventEnd-a.fetchStart,t(r,i)}else e.log("\u6d4f\u89c8\u5668\u672a\u652f\u6301 performance API.");o>0&&(i.event_duration=Number((o/1e3).toFixed(3))),e.track("$WebPageLoad",i),window.removeEventListener?window.removeEventListener("load",n):window.detachEvent&&window.detachEvent("onload",n)}"complete"==document.readyState?n():window.addEventListener?window.addEventListener("load",n):window.attachEvent&&window.attachEvent("onload",n)}};return e(t,"PageLoad","sdkReady"),t}();