!function(){"use strict";function e(e,t,n){var i=e.init;return t&&(e.name=t),e.init=function(t,a){function r(){i.call(e,t,a)}return t.readyState&&t.readyState.state>=3||!t.on?r():void t.on(n,r)},e}var t,n,i,a,r={event_list:[],latest_event_initial_time:null,max_save_time:2592e6,init:function(e,r){function s(){return t=n._,i=n.store,!!t.localStorage.isSupport()&&(n.para.max_string_length=1024,l.eventList.init(),l.addLatestChannelUrl(),void l.addIsChannelCallbackEvent())}if(n||!e)return!1;r=r||{},a=r.cookie_name||"sensorsdata2015jssdkchannel",n=e;var l=this;s()},addIsChannelCallbackEvent:function(){n.registerPage({$is_channel_callback_event:function(e){if(t.isObject(e)&&e.event&&"$WebClick"!==e.event&&"$pageview"!==e.event&&"$WebStay"!==e.event&&"$SignUp"!==e.event)return!r.eventList.hasEvent(e.event)&&(r.eventList.add(e.event),!0)}})},addLatestChannelUrl:function(){var e=this.getUrlDomain(),i=this.cookie.getChannel();if("url\u89e3\u6790\u5931\u8d25"===e)this.registerAndSave({_sa_channel_landing_url:"",_sa_channel_landing_url_error:"url\u7684domain\u89e3\u6790\u5931\u8d25"});else if(t.isReferralTraffic(document.referrer)){var a=t.getQueryParam(location.href,"sat_cf");t.isString(a)&&a.length>0?(this.registerAndSave({_sa_channel_landing_url:location.href}),r.channelLinkHandler()):this.registerAndSave({_sa_channel_landing_url:""})}else i?n.registerPage(i):n.registerPage({_sa_channel_landing_url:"",_sa_channel_landing_url_error:"\u53d6\u503c\u5f02\u5e38"})},registerAndSave:function(e){n.registerPage(e),this.cookie.saveChannel(e)},cookie:{getChannel:function(){var e=t.decryptIfNeeded(t.cookie.get(a));return e=t.safeJSONParse(e),!(!t.isObject(e)||!e.prop)&&e.prop},saveChannel:function(e){var i={prop:e},r=JSON.stringify(i);n.para.encrypt_cookie&&(r=t.encrypt(r)),t.cookie.set(a,r)}},channelLinkHandler:function(){this.eventList.reset(),n.track("$ChannelLinkReaching")},getUrlDomain:function(){var e=t.info.pageProp.url_domain;return""===e&&(e="url\u89e3\u6790\u5931\u8d25"),e},eventList:{init:function(){var e=this.get(),n=(new Date).getTime();if(e&&t.isNumber(e.latest_event_initial_time)&&t.isArray(e.eventList)){var i=n-e.latest_event_initial_time;i>0&&i<r.max_save_time?(r.event_list=e.eventList,r.latest_event_initial_time=e.latest_event_initial_time):this.reset()}else this.reset()},get:function(){var e={};try{e=i.readObjectVal("sawebjssdkchannel")}catch(t){n.log(t)}return e},add:function(e){r.event_list.push(e),this.save()},save:function(){var e={latest_event_initial_time:r.latest_event_initial_time,eventList:r.event_list};i.saveObjectVal("sawebjssdkchannel",e)},reset:function(){r.event_list=[],r.latest_event_initial_time=(new Date).getTime(),this.save()},hasEvent:function(e){var n=!1;return t.each(r.event_list,function(t){t===e&&(n=!0)}),n}}};return e(r,"SensorsChannel","sdkAfterInitPara"),r}();