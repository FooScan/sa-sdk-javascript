!function(){"use strict";function n(n,e,t){if(e&&(n.plugin_name=e),t&&n.init){var a=n.init;n.init=function(o,i){function l(){a.call(n,o,i)}return r(o,n,e),o.readyState&&o.readyState.state>=3||!o.on?l():void o.on(t,l)}}return n}function r(n,r,e){function t(r,t){n.logger?n.logger.msg.apply(n.logger,t).module(e+""||"").level(r).log():n.log&&n.log.apply(n,t)}r.log=function(){t("log",arguments)},r.warn=function(){t("warn",arguments)},r.error=function(){t("error",arguments)}}function e(r,e,t){return n(r,e,t),r.plugin_version=g,r}function t(n,r){var e=u.kit.encodeTrackData(r);return n.indexOf("?")!==-1?n+"&"+e:n+"?"+e}function a(n){var r=new c.ImageSend(n);r.start()}function o(n,r){var e=n.server_url;n.data=e&&t(e,n.data),c.isArray(e)&&e.length?c.each(e,function(r){n.callback=null,n.server_url=r,a(n)}):"string"==typeof u.para.server_url&&""!==u.para.server_url?a(n):u.logger&&u.logger.msg("\u5f53\u524d server_url \u4e3a\u7a7a\u6216\u4e0d\u6b63\u786e\uff0c\u53ea\u5728\u63a7\u5236\u53f0\u6253\u5370\u65e5\u5fd7\uff0cnetwork \u4e2d\u4e0d\u4f1a\u53d1\u6570\u636e\uff0c\u8bf7\u914d\u7f6e\u6b63\u786e\u7684 server_url\uff01").level("warn").log(),r.cancellationToken.stop()}function i(){"image"!==u.para.send_type&&"ajax"!==u.para.send_type&&"beacon"!==u.para.send_type&&(u.para.send_type="image")}function l(){u.on("sdkInitPara",function(){i()}),u.on("sdkAfterInitPara",function(){u.registerInterceptor("sendDataStage",{send:{priority:130,entry:o}})})}var u,c,g="1.25.4",s={plugin_name:"ImageSender",init:function(n){u=n,c=u._,l()}},f=e(s);return f}();