(window.SensorsDataWebJSSDKPlugin=window.SensorsDataWebJSSDKPlugin||{}).AndroidBridge=function(){"use strict";function e(e){return v&&v.call(g,JSON.stringify(e))}function i(e){return f.call(g)&&b&&b.call(g,JSON.stringify(e))}function a(e,i){return i&&"function"==typeof i[e.callType]&&i[e.callType]()}function n(e,i,a){if(i&&(e.plugin_name=i),a&&e.init){var n=e.init;e.init=function(i,r){function s(){n.call(e,i,r)}return i.readyState&&i.readyState.state>=3||!i.on?s():void i.on(a,s)}}return e}function r(e,i,a){return n(e,i,a),e.plugin_version=m,e}function s(){if(o=window.SensorsData_APP_New_H5_Bridge,_=o&&o.sensorsdata_track,c=_&&o.sensorsdata_get_server_url&&o.sensorsdata_get_server_url(),l&&!l.bridge.activeBridge&&c){if(l.bridge.activeBridge=S,l.para.app_js_bridge&&!l.para.app_js_bridge.is_mui&&(l.bridge.is_verify_success=c&&l.bridge.validateAppUrl(c)),l.bridge.bridge_info={touch_app_bridge:!0,platform:"android",verify_success:l.bridge.is_verify_success?"success":"fail",support_two_way_call:!!o.sensorsdata_js_call_app},!l.para.app_js_bridge)return void p("app_js_bridge is not configured, data will not be sent by android bridge.");l.registerInterceptor("sendDataStage",{send:{priority:60,entry:t}}),p("Android bridge inits succeed.")}}function t(e,i){if(l.para.app_js_bridge.is_mui||"item_set"===e.data.type||"item_delete"===e.data.type)return e;var a=e.callback;return l.bridge.is_verify_success?(_&&_.call(o,JSON.stringify(u.extend({server_url:l.para.server_url},e.data))),u.isFunction(a)&&a(),i.cancellationToken.cancel(),e):l.para.app_js_bridge.is_send?(l.debug.apph5({data:e.data,step:"4.2",output:"all"}),e):(u.isFunction(a)&&a(),i.cancellationToken.cancel(),e)}function d(e){var i=e.callType;return i in y.commands?y.commands[i](e,o):void(o&&u.isFunction(o.sensorsdata_js_call_app)&&o.sensorsdata_js_call_app(JSON.stringify(e)))}var o,_,c,l,u,p,g=window.SensorsData_App_Visual_Bridge,f=g&&g.sensorsdata_visualized_mode,v=g&&g.sensorsdata_visualized_alert_info,b=g&&g.sensorsdata_hover_web_nodes,y={isVerify:function(){return f&&(f===!0||f.call(g))},commands:{app_alert:e,visualized_track:i,page_info:i,sensorsdata_get_app_visual_config:a}},m="_sdk_sdk_version",S={init:function(e){l=e,u=l&&l._,p=l&&l.log||console&&console.log||function(){},s()},handleCommand:d},w=r(S,"AndroidBridge","sdkAfterInitPara");return w}();